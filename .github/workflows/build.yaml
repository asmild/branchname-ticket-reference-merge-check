# .github/workflows/build.yml
name: Compiler

on:
  push:
    branches-ignore:
      - main

jobs:
  mainBuild:
    runs-on: self-hosted

    steps:
      - uses: actions/checkout@v1
      - name: Branch name
        run: echo Running on branch ${GITHUB_REF##*/}
      - name: Run atlas-compile
        run: atlas-package
      - name: Locate target filws
        run: ls -l target

#      - name: Set up JDK 11
#        uses: actions/setup-java@v1
#        with:
#          java-version: 11

      - name: Publish to GitHub Packages
        run: mvn --batch-mode -DuseGitHubPackages=true deploy
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
